<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Certificate â€” Plinko N.U</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .cert-wrap{max-width:900px;margin:40px auto;padding:40px;border:12px solid #f7f3e6;background:#fff;position:relative}
    .cert-head{display:flex;align-items:center;gap:18px}
    .cert-logo{width:120px}
    .cert-title{font-size:32px;font-weight:900}
    .cert-body{margin-top:30px;padding:10px;color:#333}
    .seal{position:absolute;right:42px;bottom:42px;width:140px;opacity:0.95}
    .download{margin-top:20px}
  </style>
</head>
<body>
  <div class="container">
    <div class="cert-wrap" id="certificate">
      <div class="cert-head">
        <img src="assets/logo-circle.png" class="cert-logo" alt="logo">
        <div>
          <div class="cert-title">Certificate of Achievement</div>
          <div class="small">This certifies that the user has won on Plinko N.U</div>
        </div>
      </div>

      <div class="cert-body">
        <h2 id="certName">Name Here</h2>
        <p id="certText">Has been awarded a total winnings of <strong id="certAmount">$0</strong> on <span id="certDate"></span>.</p>
        <p>Congratulations on your big win. This certificate is digitally issued and valid for showcase.</p>
      </div>

      <img src="assets/seal.png" class="seal" alt="seal">
    </div>

    <div class="download">
      <button class="btn" id="downloadCert">Download Certificate (PDF)</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const user = JSON.parse(localStorage.getItem('plinkoUser') || 'null') || { username:'Guest', balance:0 };
    document.getElementById('certName').innerText = (user.firstName ? user.firstName + ' ' + (user.lastName||'') : user.username);
    document.getElementById('certAmount').innerText = '$' + (user.balance || 0);
    document.getElementById('certDate').innerText = new Date().toLocaleString();

    document.getElementById('downloadCert').addEventListener('click', async () => {
      const el = document.getElementById('certificate');
      const canvas = await html2canvas(el, { scale:2 });
      const img = canvas.toDataURL('image/png');
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('landscape','pt','a4');
      const ratio = Math.min((pdf.internal.pageSize.getWidth()-40)/canvas.width, (pdf.internal.pageSize.getHeight()-40)/canvas.height);
      const w = canvas.width * ratio;
      const h = canvas.height * ratio;
      pdf.addImage(img, 'PNG', 20, 20, w, h);
      pdf.save('plinko-certificate.pdf');
    });
  </script>
</body>
</html><!-- certificate placeholder -->
