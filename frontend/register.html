<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Register â€” Plinko N.U</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .pw-wrapper {
      position: relative;
      width: 100%;
    }
    .pw-toggle {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 18px;
      cursor: pointer;
      opacity: 0.7;
    }
  </style>
</head>

<script>
  window.onerror = function(msg, url, line, col, error) {
    alert("JS ERROR: " + msg + "\nLine: " + line);
  };
</script>

<body class="neon-page">
  <header class="site-header">
    <div class="left">
      <img src="assets/logo-card.png" alt="logo" class="logo-card">
      <h1>Plinko N.U</h1>
    </div>
    <nav class="right">
      <a href="login.html" class="small-link">Login</a>
    </nav>
  </header>

  <main class="container">
    <section class="form-card">
      <h2>Create account</h2>
      <p class="subtitle">Get <strong>$150</strong> welcome bonus instantly. Use a 4-digit secret PIN to recover password.</p>

      <form id="registerForm" enctype="multipart/form-data">
        <input type="hidden" name="referralCode" id="referralCode">

        <div class="field"><span class="icon">ğŸ‘¤</span><input name="firstName" placeholder="First name" required /></div>
        <div class="field"><span class="icon">ğŸ‘¥</span><input name="lastName" placeholder="Last name" /></div>
        <div class="field"><span class="icon">ğŸ†”</span><input name="username" placeholder="Username" required /></div>
        <div class="field"><span class="icon">âœ‰ï¸</span><input name="email" placeholder="Email" type="email" required /></div>

        <!-- Password -->
        <div class="field pw-wrapper">
          <span class="icon">ğŸ”’</span>
          <input name="password" id="password" placeholder="Password" type="password" required />
          <span class="pw-toggle" onclick="togglePW('password', this)">ğŸ‘ï¸</span>
        </div>

        <!-- Confirm Password -->
        <div class="field pw-wrapper">
          <span class="icon">ğŸ”’</span>
          <input name="confirmPassword" id="confirmPassword" placeholder="Confirm password" type="password" required />
          <span class="pw-toggle" onclick="togglePW('confirmPassword', this)">ğŸ‘ï¸</span>
        </div>

        <div class="field"><span class="icon">ğŸ”</span><input name="secretPin" placeholder="4-digit secret pin" maxlength="4" required /></div>
        <div class="field"><span class="icon">ğŸ“</span><input name="phone" placeholder="Phone" /></div>
        <div class="field"><span class="icon">ğŸ‚</span><input name="birthday" placeholder="Birthday (YYYY-MM-DD)" /></div>
        <div class="field"><span class="icon">ğŸ </span><input name="address" placeholder="Address" /></div>
        <div class="field"><span class="icon">ğŸ–¼ï¸</span><input name="profilePic" type="file" accept="image/*" /></div>

        <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
          <input id="referralCodeVisible" placeholder="Referral code (optional)" style="flex:1;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.08)">
          <button class="btn" type="submit">Create Account</button>
        </div>
      </form>

      <p class="small-note">Weâ€™ll never share your details.</p>
    </section>
  </main>

  <footer class="footer">Â© 2025 Plinko N.U</footer>

  <script>
    function togglePW(id, icon) {
      const field = document.getElementById(id);
      field.type = field.type === "password" ? "text" : "password";
      icon.textContent = field.type === "password" ? "ğŸ‘ï¸" : "ğŸ™ˆ";
    }

    // Validate password match before submitting
    document.getElementById("registerForm").addEventListener("submit", function(e) {
      const pw = document.getElementById("password").value;
      const cpw = document.getElementById("confirmPassword").value;

      if (pw !== cpw) {
        e.preventDefault();
        alert("Passwords do not match!");
        return false;
      }
    });
  </script>

  <script src="js/auth.js"></script>
  <script src="js/register.js"></script>
</body>
</html>
